<html>

<head>
<title>HTML5 Canvas &mdash; Demo scenegraph</title>
<meta http-equiv="content-type" content="text/html; charset=UTF8">
<script type="text/javascript" src="lib/dat.gui.js"></script>
<script type="text/javascript" src="lib/jquery-3.4.1.min.js"></script>

<style>
    canvas {
        border: solid 1px black
    }
    
    img {
        display: none;
    }

</style>
</head>

<body>
    
    <table>
        <thead>
            <tr>
                <td><h2>Puppet</h2></td>
                <td><h2><i>Description</i></h2></td>
            </tr>
        </thead>

        <tbody>
            <tr>
                <td>
                    <canvas id="canvas" width="600" height="700"></canvas>
                </td>

                <td style="position: absolute;">
                    <h3>Part 2: <i>Transform Composition</i></h3>

                    <p>Using the GUI, modify the variables corresponding to each body part to move it from its current position. The variables control the position or the rotation at their hinge.</p>

                    <p>Click on the "Debug Mode" to see the origin and axis at each body part.</p>

                    <a href="asteroid.html">Asteroids</a>
                </td> 
            </tr>
        </tbody>
    </table>

    <button id="debug">Debug Mode</button>

    <img id="torso" src="assets/puppet/body.png">
    <img id="rightArm" src="assets/puppet/right_arm.png">
    <img id="leftArm" src="assets/puppet/left_arm.png">
    <img id="rightForeArm" src="assets/puppet/right_forearm.png">
    <img id="leftForeArm" src="assets/puppet/left_forearm.png">
    <img id="rightHand" src="assets/puppet/right_hand.png">
    <img id="leftHand" src="assets/puppet/left_hand.png">
    <img id="rightUpperLeg" src="assets/puppet/right_upper_leg.png">
    <img id="leftUpperLeg" src="assets/puppet/left_upper_leg.png">
    <img id="rightLowerLeg" src="assets/puppet/right_lower_leg.png">
    <img id="leftLowerLeg" src="assets/puppet/left_lower_leg.png">
    <img id="rightFoot" src="assets/puppet/right_foot.png">
    <img id="leftFoot" src="assets/puppet/left_foot.png">

    <script type="module">
        import {PuppetController} from "./js/controllers/puppet_controller.js";
        import {IronManPuppetBuilder} from "./js/ironman_puppet_builder.js";
        import {Director} from "./js/director.js";
        import {Settings} from "./js/config.js";

        const director = new Director();
        var builder = new IronManPuppetBuilder();;
        var controller; 

        $(document).ready(function(event){

            director.createPuppet(builder);

            controller = new PuppetController($("#canvas"), builder.getPuppet());

            controller.updateView();
        });

        $("#debug").on('click', event => {
            Settings.DEBUG = !Settings.DEBUG;
            controller.updateView();
        });

    </script>
    
</body>
</html>   
